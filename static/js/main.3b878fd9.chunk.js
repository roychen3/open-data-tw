(this["webpackJsonpopen-data-tw"]=this["webpackJsonpopen-data-tw"]||[]).push([[0],{23:function(e,t,a){e.exports=a(35)},28:function(e,t,a){},29:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(20),o=a.n(i),c=(a(28),a(1)),l=a(2),s=a(4),h=a(3),u=a(5),m=a(14),d=a(11),p=(a(29),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t,a=[];return[{Holiday:"\u570b\u5b9a\u5047\u65e5"},{Weather:"\u5929\u6c23\u9810\u5831"}].forEach((function(n,i){e=Object.keys(n)[0],t=Object.values(n)[0],0===i?a.push(r.a.createElement(m.b,{exact:!0,to:"/",key:i,className:"header-tab"},t)):a.push(r.a.createElement(m.b,{to:"/"+e,key:i,className:"header-tab"},t))})),r.a.createElement("div",{className:"header-tab-column"},a)}}]),t}(n.Component)),f=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",{className:"title"},this.props.title)}}]),t}(n.Component),b=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement(f,{title:"\u653f\u5e9c\u8cc7\u6599\u958b\u653e\u5e73\u53f0"}),r.a.createElement(p,null))}}]),t}(n.Component),g=a(7),y=function(e){var t;switch(e){case 0:t="\u661f\u671f\u65e5";break;case 1:t="\u661f\u671f\u4e00";break;case 2:t="\u661f\u671f\u4e8c";break;case 3:t="\u661f\u671f\u4e09";break;case 4:t="\u661f\u671f\u56db";break;case 5:t="\u661f\u671f\u4e94";break;case 6:t="\u661f\u671f\u516d"}return t},E=function(e,t,a){return"error"===t?"":a(e,t)},O=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.message;return r.a.createElement("div",{className:"message-model"},e)}}]),t}(n.Component),v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).state={placeholder:a.props.placeholder},a.handleFilterTextChange=a.handleFilterTextChange.bind(Object(g.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleFilterTextChange",value:function(e){this.props.onFilterTextChange(e.target.value)}},{key:"render",value:function(){return r.a.createElement("input",{type:"text",id:"search",placeholder:this.state.placeholder,onChange:this.handleFilterTextChange})}}]),t}(n.Component),j=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){for(var e=this.props.holidayData,t=[],a=0;a<e.length;a++)"\u88dc\u884c\u4e0a\u73ed\u65e5"===e[a].holidayCategory?t.push(r.a.createElement("tr",{key:e[a].date,className:"work-day"},r.a.createElement("td",null,e[a].date),r.a.createElement("td",null,e[a].name),r.a.createElement("td",null,e[a].holidayCategory),r.a.createElement("td",null,e[a].description))):t.push(r.a.createElement("tr",{key:e[a].date},r.a.createElement("td",null,e[a].date),r.a.createElement("td",null,e[a].name),r.a.createElement("td",null,e[a].holidayCategory),r.a.createElement("td",null,e[a].description)));return t}}]),t}(n.Component);function w(e,t){for(var a=[],n=0;n<e.length;n++)if(new Date(e[n].date)>=new Date("1/1/"+t)&&new Date(e[n].date)<=new Date("12/31/"+t)&&"\u661f\u671f\u516d\u3001\u661f\u671f\u65e5"!==e[n].holidayCategory){var r={date:"",name:"",holidayCategory:"",description:""},i=new Date(e[n].date);r.date=e[n].date+" "+y(i.getDay()),r.name=e[n].name,r.holidayCategory=e[n].holidayCategory,r.description=e[n].description,a.push(r)}return a}var k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).state={isLoading:!0,isError:!1,year:(new Date).getFullYear(),webDatas:""},a.handleSearchYear=a.handleSearchYear.bind(Object(g.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleSearchYear",value:function(e){if(4===e.length)this.setState((function(t){return{year:e}}));else if(""===e||void 0===e){var t=(new Date).getFullYear();this.setState((function(e){return{year:t}}))}else this.setState((function(e){return{year:"error"}}))}},{key:"getLocalHolidayDatas",value:function(){var e=this;console.log("getLocalHolidayDatas");fetch("./localDatas/holiday.json").then((function(e){return e.json()})).then((function(t){var a=t.result.records;e.setState((function(e){return{isLoading:!1,webDatas:a}}))})).catch((function(t){console.log(t),e.setState((function(e){return{isLoading:!1,isError:!0}}))}))}},{key:"getHolidayDatas",value:function(){var e=this;console.log("getHoliday");fetch("https://cors-anywhere.herokuapp.com/http://data.ntpc.gov.tw/api/v1/rest/datastore/382000000A-000077-002").then((function(e){return e.json()})).then((function(t){var a=t.result.records;e.setState((function(e){return{isLoading:!1,webDatas:a}}))})).catch((function(t){console.log(t),e.getLocalHolidayDatas()}))}},{key:"componentDidMount",value:function(){this.getHolidayDatas()}},{key:"render",value:function(){var e,t,a=this.state.webDatas;if(this.state.isLoading)console.log("loading..."),e=r.a.createElement("p",{id:"message"},r.a.createElement("i",{className:"fas fa-spinner"})," \u8f09\u5165\u4e2d"),t=r.a.createElement(O,{message:e});else if(this.state.isError)console.log("error"),e=r.a.createElement("p",{id:"message"},r.a.createElement("i",{className:"fas fa-exclamation-triangle"})," \u4f3a\u670d\u5668\u767c\u751f\u554f\u984c"),t=r.a.createElement(O,{message:e});else if(console.log("success"),(a=E(this.state.webDatas,this.state.year,w)).length>0){var n=r.a.createElement("tr",null,r.a.createElement("th",null,"\u65e5\u671f"),r.a.createElement("th",null,"\u653e\u5047\u540d\u7a31"),r.a.createElement("th",null,"\u653e\u5047\u985e\u578b"),r.a.createElement("th",null,"\u5176\u4ed6\u8cc7\u8a0a"));t=r.a.createElement("div",null,r.a.createElement(v,{placeholder:"\u67e5\u8a62\u5e74\u4efd: e.g. 2019",onFilterTextChange:this.handleSearchYear}),r.a.createElement("table",{className:"holiday-table"},r.a.createElement("tbody",null,n,r.a.createElement(j,{holidayData:a}))))}else e=r.a.createElement("p",{id:"message"},r.a.createElement("i",{className:"far fa-file"})," \u7121\u8cc7\u6599"),t=r.a.createElement("div",null,r.a.createElement(v,{placeholder:"\u67e5\u8a62\u5e74\u4efd: e.g. 2019",onFilterTextChange:this.handleSearchYear}),r.a.createElement(O,{message:e}));return t}}]),t}(r.a.Component),C=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).state={selected:a.props.defaultSelected},a.selectedClick=a.selectedClick.bind(Object(g.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"selectedClick",value:function(e){this.setState((function(t){return{selected:e}})),this.props.onOptionChange(e)}},{key:"render",value:function(){for(var e=this,t=[],a=0;a<this.props.optionList.length;a++)t.push(this.props.optionList[a].locationName);var n=[];return t.forEach((function(t,a){t===e.state.selected?n.push(r.a.createElement("li",{key:a,className:"option selected",onClick:function(){return e.selectedClick(t)}},t)):n.push(r.a.createElement("li",{key:a,className:"option",onClick:function(){return e.selectedClick(t)}},t))})),r.a.createElement("ul",{className:this.props.isShow?"select-option show-select-option":"select-option"},n)}}]),t}(n.Component),D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).state={showOption:!1,selected:a.props.defaultSelected},a.selectBarClick=a.selectBarClick.bind(Object(g.a)(a)),a.onOptionChange=a.onOptionChange.bind(Object(g.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"selectBarClick",value:function(){this.setState((function(e){return{showOption:!e.showOption}}))}},{key:"onOptionChange",value:function(e){this.setState((function(t){return{selected:e}})),this.props.onSelecOptionChange(e)}},{key:"render",value:function(){var e=this.state.selected;return r.a.createElement("div",{className:"select-bar",onClick:this.selectBarClick},r.a.createElement("p",null,e)," ",r.a.createElement("i",{className:"fas fa-caret-down"}),r.a.createElement(C,{isShow:this.state.showOption,optionList:this.props.optionDatas,defaultSelected:e,onOptionChange:this.onOptionChange}))}}]),t}(n.Component),N=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=new Date(this.props.dayInfo.startTime),a=new Date(this.props.dayInfo.endTime),n=y(t.getDay()),i=y(a.getDay()),o=t.toLocaleTimeString("en-US"),c=a.toLocaleTimeString("en-US");return e=n===i?n:n+" - "+i,r.a.createElement("div",{className:"weather-card"},r.a.createElement("div",{className:"weather-time"},e,r.a.createElement("br",null),r.a.createElement("p",{className:"start-time"},o),r.a.createElement("p",{className:"end-time"}," - ",c)),r.a.createElement("div",{className:"weather-description"},this.props.dayInfo.weatherDescription),r.a.createElement("div",{className:"weather-temperature"},this.props.dayInfo.minTemperature," ~"," ",this.props.dayInfo.maxTemperature),r.a.createElement("div",{className:"rain-probability"},"\u964d\u96e8\u6a5f\u7387\uff1a",this.props.dayInfo.rainProbability))}}]),t}(n.Component);function S(e,t){for(var a,n,r,i,o,c,l,s={location:"",info:[{startTime:"",endTime:"",weatherDescription:"",maxTemperature:"",minTemperature:"",rainProbability:"",comfort:""},{startTime:"",endTime:"",weatherDescription:"",maxTemperature:"",minTemperature:"",rainProbability:"",comfort:""},{startTime:"",endTime:"",weatherDescription:"",maxTemperature:"",minTemperature:"",rainProbability:"",comfort:""}]},h=0;h<e.length;h++)if(e[h].locationName===t){a=h;break}for(var u=0;u<e[a].weatherElement.length;u++){n=e[a].weatherElement[u].elementName,s.location=e[a].locationName;for(var m=0;m<e[a].weatherElement[u].time.length;m++)r=e[a].weatherElement[u].time[m].startTime,i=e[a].weatherElement[u].time[m].endTime,m<3&&(s.info[m].startTime=r,s.info[m].endTime=i),"Wx"===n?(o=e[a].weatherElement[u].time[m].parameter.parameterName,s.info[m].weatherDescription=o):"MaxT"===n?(l=e[a].weatherElement[u].time[m].parameter.parameterName+"\u2103",s.info[m].maxTemperature=l):"MinT"===n?(l=e[a].weatherElement[u].time[m].parameter.parameterName+"\u2103",s.info[m].minTemperature=l):"CI"===n?(o=e[a].weatherElement[u].time[m].parameter.parameterName,s.info[m].comfort=o):"PoP"===n&&(c=e[a].weatherElement[u].time[m].parameter.parameterName+"%",s.info[m].rainProbability=c)}return s}var T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).state={isLoading:!0,isError:!1,city:"\u81fa\u5317\u5e02",webDatas:""},a.onSelecOptionChange=a.onSelecOptionChange.bind(Object(g.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"onSelecOptionChange",value:function(e){this.setState((function(t){return{city:e}}))}},{key:"getLocalWeatherDatas",value:function(){var e=this;console.log("getLocalWeatherDatas");fetch("./localDatas/weather.json").then((function(e){return e.json()})).then((function(t){var a=t.cwbopendata.dataset.location;e.setState((function(e){return{isLoading:!1,webDatas:a}}))})).catch((function(t){console.log(t),e.setState((function(e){return{isLoading:!1,isError:!0}}))}))}},{key:"getWeatherDatas",value:function(){var e=this;console.log("getWeather");fetch("https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/F-C0032-001?Authorization=rdec-key-123-45678-011121314&format=JSON").then((function(e){return e.json()})).then((function(t){var a=t.cwbopendata.dataset.location;e.setState((function(e){return{isLoading:!1,webDatas:a}}))})).catch((function(t){console.log(t),e.getLocalWeatherDatas()}))}},{key:"componentDidMount",value:function(){this.getWeatherDatas()}},{key:"render",value:function(){var e,t;if(this.state.isLoading)console.log("loading..."),t=r.a.createElement("p",{id:"message"},r.a.createElement("i",{className:"fas fa-spinner"})," \u8f09\u5165\u4e2d"),e=r.a.createElement(O,{message:t});else if(this.state.isError)console.log("error"),t=r.a.createElement("p",{id:"message"},r.a.createElement("i",{className:"fas fa-exclamation-triangle"})," \u4f3a\u670d\u5668\u767c\u751f\u554f\u984c"),e=r.a.createElement(O,{message:t});else{console.log("success");var a=E(this.state.webDatas,this.state.city,S),n=a.info.map((function(e,t){return r.a.createElement(N,{key:t,dayInfo:e})}));e=r.a.createElement("div",null,r.a.createElement(D,{optionDatas:this.state.webDatas,defaultSelected:this.state.city,onSelecOptionChange:this.onSelecOptionChange}),r.a.createElement("div",{className:"weather"},r.a.createElement("h3",{className:"weather-location"},a.location),r.a.createElement("div",{className:"weather-card-container"},n)))}return e}}]),t}(r.a.Component),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).state={webModel:"\u570b\u5b9a\u5047\u65e5"},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(b,null),r.a.createElement("div",{className:"container"},r.a.createElement(d.a,{exact:!0,path:"/",component:k}),r.a.createElement(d.a,{path:"/Weather",component:T})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.3b878fd9.chunk.js.map